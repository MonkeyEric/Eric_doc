# 需求：
* 加载数据
* 查看数据的基本信息
* 指定数据截取，如下字段的数据进行提取，其他数据舍弃
    * cand_nm：候选人姓名
    * contbr_nm：据那怎人跟姓名
    * contbr_st: 捐赠人所在州
    * contbr_employer: 捐赠人所在公司
    * contbr_occupation：捐赠人职业
    * contb_receipt_amt:捐赠数额
    * contb_receipt_dt:捐款的日期
    
* 对新数据进行总览，查看是否存在缺失数据
* 用统计学指标快速描述数值型属性的概要
* 控制处理。可能因为忘记填写或者保密等等原因，相关字段出现了空值，将其填充为NOT PROVIDE
* 异常值处理。将捐款金额<=0的数据删除
* 新建一列为各个后渲染所在党派party
* 查看party这一列中有哪些不同的元素
* 统计party列中各个元素出现次数
* 查看各个党派收到的政治献金总数contb_receipt_amt
* 查看具体每天各个党派收到的政治献金总数contb_receipt_amt
* 将表中日期格式转换为"yyyy-mm-dd"
* 查看老兵（捐献者职业）DISABLED VETERAN主要支持谁



```python
import pandas as pd
from pandas import DataFrame
df = pd.read_csv('usa_election.txt')
data = df[['cand_nm','contbr_nm','contbr_st','contbr_employer','contbr_occupation','contb_receipt_amt','contb_receipt_dt']]
# 用统计学指标快速描述数值型属性的概要
data.describe()
# 空值处理。可能因为忘记填写或者保密等原因，相关字段出现了空值，将其填充为NOT PROVIDE
data.fillna(value='NOT PROVIDE',inplace=True)
# 异常值处理，将捐赠金额<=0的数据删除掉
 # false表示异常值
data = data.loc[data['contb_receipt_amt']>0]
#新建一列为各个候选人所在党派party
parties = {
'Bachmann, Michelle': 'Republican',
'Romney, Mitt': 'Republican',
'Obama, Barack': 'Democrat',
"Roemer, Charles E. 'Buddy' III": 'Reform',
'Pawlenty, Timothy': 'Republican',
'Johnson, Gary Earl': 'Libertarian',
'Paul, Ron': 'Republican',
'Santorum, Rick': 'Republican',
'Cain, Herman': 'Republican',
'Gingrich, Newt': 'Republican',
'McCotter, Thaddeus G': 'Republican',
'Huntsman, Jon': 'Republican',
'Perry, Rick': 'Republican' 
}
data['party']= df['cand_nm'].map(parties)
# * 查看party这一列中有哪些不同的元素
data['party'].unique()
# * 统计party列中各个元素出现次数
data['party'].value_counts()
# * 查看各个党派收到的政治献金总数contb_receipt_amt
data.groupby(by='party')['contb_receipt_amt'].sum()
# * 查看具体每天各个党派收到的政治献金总数contb_receipt_amt

data.groupby(by=['contb_receipt_dt','party'])['contb_receipt_amt'].sum()
# * 将表中日期格式转换为"yyyy-mm-dd". 映射
months = {'JAN' : 1, 'FEB' : 2, 'MAR' : 3, 'APR' : 4, 'MAY' : 5, 'JUN' : 6,
'JUL' : 7, 'AUG' : 8, 'SEP' : 9, 'OCT': 10, 'NOV': 11, 'DEC' : 12}
def transformData(d):
    day,month,year = d.split('-')
    month = months[month]
    return '20'+year+'-'+str(month)+'-'+day
data['contb_receipt_dt'].map(transformData)
# * 查看老兵（捐献者职业）DISABLED VETERAN主要支持谁
#　分析：1. 提取出老兵的数据
#　2. 根据候选人分组
old_solider = data.loc[data['contbr_occupation']=='DISABLED VETERAN']
old_solider.groupby(by=['cand_nm'])['contb_receipt_amt'].sum()
```